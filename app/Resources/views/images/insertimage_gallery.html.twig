{% extends 'default/layout_update.html.twig' %}
 {% block leftside %}
     {% include 'default/nav_update.html.twig' %}
 {% endblock %}
{% block rightside %}

    <div class="page-title" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
        <h1>
            Gestion des images
        </h1>
    </div><!-- /.page-title -->
    <div class="background-white p20 mb30">

        <div class="row">
        {{ form_start(galleryForm) }}
        <div class="form-group col-sm-6">
            <h3>Ajouter une image</h3>

            {{ form_row(galleryForm.file) }}

            <button type="submit" class="btn btn-primary pull-right">Ins√©rer</button>
        </div><!-- /.form-group -->


        {{ form_end(galleryForm) }}


        {% if gallery is not empty %}

            <div class="form-group col-sm-6">

                <h3>Supprimer une image</h3>
                <ul style="list-style-type: none">
                    {% for i in gallery %}
                        <li class="col-sm-4 js-gallery-item">
                            <a href="#"
                               class="js-remove-image-gallery"
                               data-url="{{ path('gallery_image_delete',{
                                   imgId: i.id,
                               }) }}"
                            >
                                <img src="{{ i.url }}" height="50px"/><br>
                                <span class="fa fa-close"></span>
                            </a>
                        </li>

                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        </div>
    </div>
{% endblock %}
{% block javascripts %}

    {{ parent() }}

    <script>
        jQuery(document).ready(function () {
            $('.js-remove-image-gallery').on('click', function(e){
                e.preventDefault();

                var $el=$(this).closest('.js-gallery-item');

                $(this).find('.fa-close')
                    .removeClass('fa-close')

                $.ajax({
                    url:$(this).data('url'),
                    method: 'DELETE'
                }).done(function () {
                    $el.fadeOut();
                })
            });

        });
    </script>
{% endblock %}

